# 基本操作ガイド（起動〜YouTubeアップロードまで）

対象バージョン: v2.0 以降。環境構築と API キー設定（Pexels/Pixabay/LLM/YouTube）が済んでいる前提です。

---

## 1. アプリ起動
1. `Start_DesktopApp.command` をダブルクリック（またはシェルで `./Start_DesktopApp.command`）。
2. 初回のみ、設定画面で以下を入力して保存:
   - AI プロバイダ/モデル/API Key
   - Pexels/Pixabay API Key（背景素材自動取得用）
   - YouTube: client_secret と credentials.pickle のパス、公開範囲

## 2. 台本を作る
1. 上部タブ「台本編集」を開く。
2. テーマを選択（フリーテーマ可）して「新規 (テーマから)」。
3. ブリーフ（概要）とセクション数を入力し、「AIで生成」を押す。  
   - ショートにしたい場合は「ショート調整」をオン。通常は 2分目安の構成。
4. 生成されたセクションを必要に応じて編集し、保存（YAMLに反映されます）。

## 3. 背景素材とBGM
1. タブ「素材・音声」で現在の背景を確認。必要なら「別ウインドウで検索」から自動取得/選択。
2. BGM を指定（ファイル/URL）。音量と ducking（ナレーション時の減衰）を調整。
3. VOICEVOX で音声生成する場合は「音声生成」→ タイムライン更新。

## 4. 動画生成
1. タブ「動画・アップロード」で「動画を生成」を押す。  
   - デフォルトで音声キャッシュをクリア（チェックを外すと再利用）。  
   - ショート動画にしたい場合は「ショート動画モード」にチェック。
2. 完了後、「生成動画を開く」で再生確認。ログは下のテキストエリアに表示。

## 5. YouTube へのアップロード
1. 「YouTubeへアップロード」を押す。設定で指定した client_secret/credentials を使用。  
   - タイトル/説明/タグは台本の upload_prep があればそれを利用、なければ簡易タイトルでアップロード。
   - アップロード本数制限（uploadLimitExceeded）に当たると警告が出ますが、動画生成は成功済みです。

## 6. 過去の生成動画
- 「過去の生成動画」一覧で mp4 を確認できます。開く/削除/再アップロードが可能。

## 7. 定期実行（任意）
1. ヘッダー「定期実行」からタスクを追加。  
   - 追加キーワード、カテゴリ、ショートモード、間隔、開始まで(分)、自動アップロード ON/OFF を設定。  
   - 保存後は一覧が再読み込みされます。
2. ステータス表示ウインドウで実行状況とログを確認可能。

---

## トラブルシュートのヒント
- 背景素材 400エラー: Pixabay キーワード長・lang制約。Pexels優先推奨。  
- YouTube アップロード失敗: 本数制限は時間経過で回復。自動アップロードをOFFにして生成のみ実施も可。  
- LLMレスポンス不良: `logs/llm_errors/` に保存されたテキストを確認。
